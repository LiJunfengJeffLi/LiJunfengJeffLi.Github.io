<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Mysql学习笔记（三）——数据检索与排序]]></title>
    <url>%2F2017%2F11%2F15%2Fmysql-3%2F</url>
    <content type="text"><![CDATA[本节介绍数据的检索与排序，此操作将由select语句及其子句order by分别实现。要知道，SQL语句是由简单的英语单词构成，如select，create这些单词在SQL语言中被称为关键字。接触过SQL语言的小伙伴应该知道select基本算是最常使用的SQL关键字了，它几乎就是SQL的象征，下面是select的表演时间。 1. 检索数据 首先，select语句的用途是从一个或多个表中检索信息，而要使用其来检索表数据至少需要给出两条信息：一是想检索的是什么，二是从什么地方进行检索（比如你要检索的信息来自哪张表）。 1.1 检索单个列 比如，想从产品表（products）中检索产品名对应的列（prod_name）,需要select语句后接列名，并使用from关键字指出存放该数据的表。 123456789101112131415161718192021select prod_name #输入from products; +----------------+ #输出| prod_name |+----------------+| .5 ton anvil || 1 ton anvil || 2 ton anvil || Detonator || Bird seed || Carrots || Fuses || JetPack 1000 || JetPack 2000 || Oil can || Safe || Sling || TNT (1 stick) || TNT (5 sticks) |+----------------+14 rows in set (0.05 sec) 上述select语句返回products表中prod_name这一列的所有行，且没有经过排序（也就是说重复上述语句输出的结果顺序可能不一致，要知道没有经过排序而考察顺序是毫无意义的，只要行数一致就是正常的）。 注意，SQL关键字不区分大小写。在处理SQL语句时其中的空格都将被忽略，即SQL语句可以在一行给出也可以进行分行（分行会使语句更容易阅读和调试）。多条语句间必须使用;加以分割，在多数的DBMS中，单条语句后;可加可不加，但是如果使用的是mysql命令行实用程序，必须加上;来结束SQL语句。 1.2 检索多个列 如果想要从一张表上检索多个列，也采用与上述相同的select语句，但select关键字后需要给出多个列名且列名之间用逗号分隔。比如，想要从产品表（products）中检索产品号（prod_id），产品名（prod_name），产品价格（prod_price）信息。 123456789101112131415161718192021select prod_id, prod_name, prod_price #输入from products;+---------+----------------+------------+ #输出| prod_id | prod_name | prod_price |+---------+----------------+------------+| ANV01 | .5 ton anvil | 5.99 || ANV02 | 1 ton anvil | 9.99 || ANV03 | 2 ton anvil | 14.99 || DTNTR | Detonator | 13.00 || FB | Bird seed | 10.00 || FC | Carrots | 2.50 || FU1 | Fuses | 3.42 || JP1000 | JetPack 1000 | 35.00 || JP2000 | JetPack 2000 | 55.00 || OL1 | Oil can | 8.99 || SAFE | Safe | 50.00 || SLING | Sling | 4.49 || TNT1 | TNT (1 stick) | 2.50 || TNT2 | TNT (5 sticks) | 10.00 |+---------+----------------+------------+14 rows in set (0.00 sec) 注意，SQL语句一般返回原始、无格式的数据。数据展现的格式是一个表示问题，而不应包括在数据的检索中。 1.3 检索所有列 要检索出一张表的所有列，同样使用上述相同的select语句，但不需要逐个列出表中的所有列。这可以采用*通配符来实现，事实上*通配符的好处在于你或许不知道所有列的列名，而通过它能检索出未知列。其语句如下： 1select * from products; #输入 如何实现检索不同的行？ 如上述，select语句的结果返回被检索列的所有行，比如检索产品表（products）中供应商ID（vend_id）这一列，返回结果： 1234567891011121314151617181920select vend_id from products; #输入+---------+ #输出 | vend_id |+---------+| 1001 || 1001 || 1001 || 1002 || 1002 || 1003 || 1003 || 1003 || 1003 || 1003 || 1003 || 1003 || 1005 || 1005 |+---------+14 rows in set (0.02 sec) 虽然结果显示返回14行（因为products表中列出了14个产品），但是容易看到实际表中只有4个供应商，想要只返回列中的不同值需要用到distinct关键字，它指示Mysql只返回不同值。 1234567891011select distinct vend_id #输入from products;+---------+ #输出 | vend_id |+---------+| 1001 || 1002 || 1003 || 1005 |+---------+4 rows in set (0.05 sec) 注意，distinct关键字应用于给出的所有列儿不仅仅只是前置它的列。 如何限制输出？ 或许在有些情况下，你只希望查看某一列的前几行，在select语句中家加入limit子句可以实现这一任务。下面给出两个例子： 123456789101112select prod_name from products #输入limit 5;+--------------+ #输出 | prod_name |+--------------+| .5 ton anvil || 1 ton anvil || 2 ton anvil || Detonator || Bird seed |+--------------+5 rows in set (0.00 sec) 上述语句中，limit 5指示Mysql返回前5行。 123456789101112select prod_name from products #输入limit 5, 5;+--------------+ #输出| prod_name |+--------------+| Carrots || Fuses || JetPack 1000 || JetPack 2000 || Oil can |+--------------+5 rows in set (0.00 sec) 上述语句可以得到下一个5行，limit 5, 5指示Mysql返回从行5开始的5行，其中第一个数表示开始位置，第二个数表示要检索的行数。注意此处的第一个参数为行的索引号而不是真实的行序号，实际上行的索引号比行序号要小1，即第1行为行0而不是行1。且要注意带一个值的limit总是从第一行开始，给出的数为返回的行数；而带两个值的limit是从第一个值的位置开始返回行，返回行数为第二个值。limit语句还有一种替代语法，例如limit 5 offset 2，它等同于limit 2, 5。 2. 排序检索数据 在前一部分的数据检索中使用的select语句输出中可以看到，返回结果是没有特定顺序的。实际上，以此方式检索出的数据并非以纯粹的随机顺序显示。如果不进行排序，数据一般讲以它在底层表中出现的顺序显示，这可能是数据最开始添加到表中的顺序。但是，如果数据后来进行过更新或者删除，则此顺序会受到Mysql重用回收存储空间的影响，也就是说在没有明确控制顺序的情况下此输出结果的顺序是没有参考价值的。 子句（clause）： 一个子句通常由一个关键字和所提供的数据组成。一条完整的SQL语句可包含子句，有些子句是必须的（比如select语句中的from子句，通过它确定需要提取列所在的表），而有些子句是可选的。 2.1 排序数据 为了对select语句检索出的数据进行排序，可以使用order by子句确定一个或多个列名，并据此对输出进行排序。注意，通常order by子句中所使用的列是select语句中选择的列，但也可以不是（即使用其他列对select语句中的列进行排序也是可以的）。下面是数据排序的一个例子： 12345678910111213141516171819202122select prod_id, prod_price, prod_name #输入from productsorder by prod_price, prod_name+---------+------------+----------------+ #输出| prod_id | prod_price | prod_name |+---------+------------+----------------+| FC | 2.50 | Carrots || TNT1 | 2.50 | TNT (1 stick) || FU1 | 3.42 | Fuses || SLING | 4.49 | Sling || ANV01 | 5.99 | .5 ton anvil || OL1 | 8.99 | Oil can || ANV02 | 9.99 | 1 ton anvil || FB | 10.00 | Bird seed || TNT2 | 10.00 | TNT (5 sticks) || DTNTR | 13.00 | Detonator || ANV03 | 14.99 | 2 ton anvil || JP1000 | 35.00 | JetPack 1000 || SAFE | 50.00 | Safe || JP2000 | 55.00 | JetPack 2000 |+---------+------------+----------------+14 rows in set (0.00 sec) 此例是检索产品表中的产品ID，产品价格和产品名，并对输出结果按照产品价格和产品名进行排序（先按价格排序，再按名称排序）。注意，在按照多个列进行排序时，排序完全按照所规定的顺序进行（在本例中如果多个行具有相同的价格则咱其名称进行再排序）。 2.2 指定排序的方向 数据排序不限于升序排序（这是默认的排序顺序），还可以通过在order by子句中指定desc关键字对输出结果进行降序排序。如下例： 12345678910111213141516171819202122select prod_id, prod_price, prod_name #输入from productsorder by prod_price desc;+---------+------------+----------------+ #输出| prod_id | prod_price | prod_name |+---------+------------+----------------+| JP2000 | 55.00 | JetPack 2000 || SAFE | 50.00 | Safe || JP1000 | 35.00 | JetPack 1000 || ANV03 | 14.99 | 2 ton anvil || DTNTR | 13.00 | Detonator || FB | 10.00 | Bird seed || TNT2 | 10.00 | TNT (5 sticks) || ANV02 | 9.99 | 1 ton anvil || OL1 | 8.99 | Oil can || ANV01 | 5.99 | .5 ton anvil || SLING | 4.49 | Sling || FU1 | 3.42 | Fuses || FC | 2.50 | Carrots || TNT1 | 2.50 | TNT (1 stick) |+---------+------------+----------------+14 rows in set (0.00 sec) 注意，desc关键字只应用到直接位于其前面的列名，位于其后的列名仍然按默认的升序。如果想在多个列上进行降序排序，需要对order by后的每个列名指定desc关键字。与desc关键字相反的是asc关键字，但升序是默认的排序方式，所以无需特别指定。 其次，要特别注意各个子句出现的次序（比如order by子句出现在from子句之后，而limit子句出现在order by子句之后），子句次序混乱将会报错。 如何检索一列中最高或者最底的值？ 到目前为止order by以及limit子句可以帮助实现这一检索，have a try!]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mysql学习笔记（二）——连接服务器]]></title>
    <url>%2F2017%2F11%2F14%2Fmysql-2%2F</url>
    <content type="text"><![CDATA[前一章节介绍了数据库基本概念，在有可使用的服务器和客户机软件之后，连接到数据库是执行后续操作的首要步骤。所有的图形化客户机软件都提供服务器连接窗口，本小白使用的是最原始的Mysql命令行实用程序，后续展现的代码也是基于该客户机工具。 服务器连接要连接到服务器需要知道其四个基本信息：主机名，端口，用户名以及口令。 主机名：也是计算机名，如果连接的是本地Mysql服务器则为localhost。 端口：如果使用默认端口3306之外的端口需要提供其端口号。（在网络上，各主机通过TCP/IP协议进行数据交互，而主机上有多程序同时运行，要将数据准确传输到某个特定的程序就需要引入端口机制将各个程序与特定端口号对应，进而实现针对到程序间的数据交互。） 用户名 用户名口令：就是对应的密码。 在命令提示符下输入: 1mysql -h localhost -u root -p *** -P 3306 #-h后跟主机名 -u后跟用户名 -p后跟口令 -P后跟端口号 输入完成后会出现如下一个简单提示： 12345678910111213Welcome to the MySQL monitor. Commands end with ; or \g.Your MySQL connection id is 3Server version: 5.7.19-log MySQL Community Server (GPL)Copyright (c) 2000, 2017, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.mysql&gt; 注意，如果连接本地服务器出现错误，请检查本地Mysql服务是否开启，或许需要手动开启服务。后续命令输入在mysql&gt;之后，命令用；结束，输入quit或exit退出Mysql命令行实用程序。 选择数据库 要知道，在最初连接到Mysql时，没有任何数据库打开供你使用，你需要选择一个数据库进而执行其他数据库操作。如果你不知道可以使用的数据库名，可以使用show关键字来显示数据库信息。下面是一个简单的例子： 123456789101112show databases; #输入+--------------------+ #输出| Database |+--------------------+| information_schema || cda1 || crashcourse || mysql || performance_schema || sys |+--------------------+6 rows in set (0.04 sec) 此处返回一个数据库列表，列表中是Mysql内部可能使用的数据库。下一步选择你想进入的数据库，如下： 12use crashcourse; #输入Database changed #输出 注意，use语句不返回任何结果，依赖于使用的客户机软件，显示某种形式的通知。必须先使用use语句打开数据库才能读取其中的数据。 关于show语句 更多的show语句可以在Mysql命令行实用程序中，执行help show;进行查看，此处列出两个常用show语句： 123456789101112show tables; #输入+-----------------------+ #输出| Tables_in_crashcourse |+-----------------------+| customers || orderitems || orders || productnotes || products || vendors |+-----------------------+6 rows in set (0.00 sec) 注意，show tables;返回正在使用的数据库内的表的列表。 1234567891011show columns from products; #输入+------------+--------------+------+-----+---------+-------+ #输出| Field | Type | Null | Key | Default | Extra |+------------+--------------+------+-----+---------+-------+| prod_id | char(10) | NO | PRI | NULL | || vend_id | int(11) | NO | MUL | NULL | || prod_name | char(255) | NO | | NULL | || prod_price | decimal(8,2) | NO | | NULL | || prod_desc | text | YES | | NULL | |+------------+--------------+------+-----+---------+-------+5 rows in set (0.12 sec) 注意，show columns语句要求指定一个数据库内的表名，此例中使用的是products表，它对每个表中的每个字段返回一行（包含了各行数据类型，允许空值与否，主外键，默认值及额外信息）。show columns还有一种快捷方式，使用describe products会返回如上相同的结果。]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mysql学习笔记（一）——数据库基础概念]]></title>
    <url>%2F2017%2F11%2F13%2Fmysql-1%2F</url>
    <content type="text"><![CDATA[在写这篇文章之前，我只花了一小段时间大致对《Mysql必知必会》这本小册子翻看了一遍。作为新入坑小白的我知道使用数据库是每位数据科学相关工作者的必备技能，在深入学习之前，理解关于它的基本概念及术语对后续的学习会有很大的帮助。 那么，初步接触数据库的第一个问题，十有八九，为什么要学习数据库或者数据有什么用？像这样的问题，作为数学和统计专业出身的我只会微微一笑，当然，数据库毕竟不是单纯的理论。给大家举个例子，假设各位看官开了一家书店，那么如何摆放书籍便于你自己还有前来买书的人搜寻就是一个需要解决的难题。如果说你的书店只卖两本书，那或许考虑怎么摆书是徒劳无功的，但如果你的书店有两万本各不相同书呢？现实情况往往更类似于后者。这样，你就需要将书进行分类以及整理，不同的店家有不同的方法，但需要告诉别人整理摆放的规则使所有的人都能按需检索。现今，有许多企业都拥有非常大规模的数据，虽然它们分别属于不同的行业，但都同样面临管理数据的问题，而数据库技术就能帮助解决这一难题。 要知道其实生活中，我们一直都在使用数据库，比如利用搜索引擎检索、查询自己的银行账户余额等等。数据库技术针对于数据管理，是计算机科学的重要分支。但由于一些原因，不同的人会使用相同的数据库术语表示不同的事物，所以对于本对其就不清楚的小白来说更加混乱。下面，我将列出一些数据库术语并加以说明。 基本术语： 数据库（Database, DB）：数据库是指一种可共享的，以某种有组织的方式存储在计算机内的数据集合。（简单理解，可以将其想象为是保存有组织数据的容器，比如一个文件夹，是存放数据的物理位置。） 数据库管理系统（Database Management System, DBMS）:数据库软件也称为DBMS，通过它我们可以创建和操纵数据库。（通常会看到一些人使用数据库这个术语来代表他们使用的数据库软件，但这是不正确的而且容易引起混淆，因为一般来说我们并不直接访问数据库而是通过DBMS。） SQL（Structrued Query Language）:结构化查询语言，是一种专门用来与数据库通信的语言。（几乎所有DBMS都支持SQL，它不是由某个特定数据库供应商专有的，但也并非所有语句都是可移植于不同DBMS。） 表（table）:某种特定类型数据的结构化清单。（比如，想要将数据放进文件夹，首先需要在其中创建文件，然后将相关的数据放入特定的文件中。可以将数据库中的表想象成这里的文件，表是一种结构化的文件，用来存储某种特定类型的数据，每个表都有一个自己的名字。） 模式（schema）:是关于表和数据库信息的特性和结构的信息。（每个表都有一定的特性，这些特性决定了数据在各个表中如何存储，用于描述表的这组信息以及数据库中各个表之间的关系即为模式。） 列（column）:表中的一个字段。（表由列组成，每一列都存储着一条特定的信息。比如客户信息表中，客户编号、姓名、住址分别记录于各个列中。将数据有效的分解为多个列是有非常必要的，否则在排序和过滤时会非常困难。） 行（row）:表中的一个记录。（例如，客户信息表中每行存储着一个客户。行和记录这两个术语可以互相替代，但从技术层面讲，行才是正确的术语。） 主键（primary key）:一列或一组列，其值可以唯一区分表中的每个行。（例如客户信息表中，可用客户编号列作为主键。若没有主键，更新或删除表中特定行将变得困难，因为没有安全的方法保证只涉及相关的行。） 关于Mysql 前文说到了数据库管理系统，数据的管理、处理实际都是由数据库软件，即DBMS完成的。而Mysql就是DBMS的一种，知名的DBMS还有Oracle,SQL Server,DB2等等。至于为什么选Mysql，见仁见智，首先Mysql是开源的，就好像SAS和R一样（你买得起吗你就学SAS？你的公司买SAS了吗你就学？。。。开源万岁！）。其次，Mysql的使用非常广泛，一些知名企业也使用Mysql来管理自己的数据，它执行快且容易安装和使用。 DBMS可分为两类：一种是共享文件系统的DBMS，一种是基于客户机-服务器的DBMS。前者用于桌面用途，通常不用于高端应用。Mysql即是基于客户机-服务器的DBMS。服务器是负责所有数据访问和处理的一个软件，这个软件运行在称为数据库服务器的计算机上，关于数据添加、删除、更新等请求都由服务器软件来完成。而这些请求来自于运行客户机软件的计算机，它直接和用户交互。比如，你请求检索某数据库中某张表的一个字段，则客户机软件通过网络提交请求给服务器软件，服务器软件处理这个请求并将结果反馈至客户机。（注意：客户机和服务器软件可以安装在不同或同一台计算机上，但要和数据库交互，客户机都要和服务器进行通信。） 服务器软件为Mysql DBMS。可以在本地安装的副本上运行，也可以连接到运行在你具有访问权限的远程服务器上的副本。 客户机软件是Mysql提供的工具，如Workbench等。 本菜鸟目前用的是mysql命令行实用程序以及Workbench。前者没有下拉菜单，用户界面及鼠标支持，但它是Mysql核心安装的一部分，简单实用，只需在操作系统命令提示符下输入简单语句即可进入。至于类似Workbench这类图形交互客户机软件有很多，不同人根据自己习惯喜好不同可自行选择，由于我也只用过Workbench就不瞎推荐了。。。]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[一首令人窒息的诗歌]]></title>
    <url>%2F2017%2F11%2F07%2Fpoetry%2F</url>
    <content type="text"><![CDATA[短歌行曹操对酒当歌，人生几何！譬如朝露，去日苦多。慨当以慷，忧思难忘。何以解忧？唯有杜康。 青青子衿，悠悠我心。但为君故，沉吟至今。 呦呦鹿鸣，食野之苹。我有嘉宾，鼓瑟吹笙。 明明如月，何时可掇？忧从中来，不可断绝。 越陌度阡，枉用相存。契阔谈讌，心念旧恩。 月明星稀，乌鹊南飞。绕树三匝，何枝可依？ 山不厌高，海不厌深。周公吐哺，天下归心。 《短歌行》是汉乐府的旧题，属于《相和歌辞·平调曲》。这就是说它本来是一个乐曲的名称。最初的古辞已经失传。乐府里收集的同名有24首，最早的是曹操的这首。这种乐曲怎么唱法，现在当然是不知道了。但乐府《相和歌·平调曲》中除了《短歌行》还有《长歌行》，唐代吴兢《乐府古题要解》引证古诗“长歌正激烈”，魏文帝曹丕《燕歌行》“短歌微吟不能长”和晋代傅玄《艳歌行》“咄来长歌续短歌”等句，认为“长歌”、“短歌”是指“歌声有长短”。现在也就只能根据这一点点材料来理解《短歌行》的音乐特点。《短歌行》这个乐曲，原来当然也有相应的歌辞，就是“乐府古辞”，但这古辞已经失传了。现在所能见到的最早的《短歌行》就是曹操所作的拟乐府《短歌行》。所谓“拟乐府”就是运用乐府旧曲来补作新词，曹操传世的《短歌行》共有两首，这里要介绍的是其中的第一首。 这首《短歌行》的主题非常明确，就是作者希望有大量人才来为自己所用。曹操在其政治活动中，为了扩大他在庶族地主中的统治基础，打击反动的世袭豪强势力，曾大力强调“唯才是举”，为此而先后发布了“求贤令”、“举士令”、“求逸才令”等；而《短歌行》实际上就是一曲“求贤歌”、又正因为运用了诗歌的形式，含有丰富的抒情成分，所以就能起到独特的感染作用，有力地宣传了他所坚持的主张，配合了他所颁发的政令。正像曹操的其它诗作如《蒿里行》、《对酒》、《苦寒行》等一样，是政治性很强的诗作，主要是为曹操当时所实行的政治路线和政治策略服务的；然而它那政治内容和意义却完全熔铸在浓郁的抒情意境之中，全诗充分发挥了诗歌创作的特长，准确而巧妙地运用了比兴手法，来达到寓理于情，以情感人的目的。在曹操的时代，他就已经能够按照抒情诗的特殊规律来取得预期的社会效果，这一创作经验显然是值得借鉴的。同时因为曹操在当时强调“唯才是举”有一定的进步意义，所以他对“求贤”这一主题所作的高度艺术化的表现，也应得到历史的肯定。]]></content>
      <categories>
        <category>杂文</category>
      </categories>
      <tags>
        <tag>poetry</tag>
      </tags>
  </entry>
</search>
